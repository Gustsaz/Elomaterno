<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EloMaterno - Formulário</title>
    <link rel="stylesheet" href="./css/form.css">
    <script type="module" src="/firebase-config.js"></script>
    <link rel="icon" type="image/svg+xml" href="img/iconelogo.svg">
    <link rel="alternate icon" type="image/png" href="img/iconelogo.png">
</head>

<body>
    <div class="page">
        <div class="form-container">
            <div id="question-number">Pergunta 1 de 2</div>
            <h2 id="question-text">Formulário de permissões</h2>

            <div id="options-container" class="options-grid"></div>

            <div class="navigation">
                <button id="prev-btn" onclick="prevQuestion()">Voltar</button>
                <button id="next-btn" onclick="nextQuestion()">Próxima</button>
            </div>
        </div>
    </div>

    <script>
        const questions = [
            { question: "Você é mãe solo?", options: ["Sim", "Não"], type: "single" },
            { question: "Você gostaria de ter acesso a:", options: ["Consultorias com psicólogos", "Interações no fórum", "Artigos informativos", "Calendário de eventos"], type: "multiple" }
        ];

        let currentQuestion = 0;
        const selections = [];

        function loadQuestion() {
            const q = questions[currentQuestion];
            document.getElementById("question-number").textContent = `Pergunta ${currentQuestion + 1} de ${questions.length}`;
            document.getElementById("question-text").textContent = q.question;

            const container = document.getElementById("options-container");
            container.innerHTML = "";

            q.options.forEach(option => {
                const btn = document.createElement("button");
                btn.className = "option-btn";
                btn.textContent = option;

                btn.onclick = () => {
                    if (q.type === "single") {
                        document.querySelectorAll(".option-btn").forEach(b => b.classList.remove("selected"));
                        btn.classList.add("selected");
                    } else {
                        btn.classList.toggle("selected");
                    }
                };

                container.appendChild(btn);
            });

            // ajustar grid dinamicamente (opcional)
            document.getElementById("prev-btn").style.display = currentQuestion === 0 ? "none" : "inline-block";
            document.getElementById("next-btn").textContent = currentQuestion === questions.length - 1 ? "Terminar" : "Próxima";
        }

        function nextQuestion() {
            saveSelections();
            if (currentQuestion < questions.length - 1) {
                currentQuestion++;
                loadQuestion();
            } else {
                saveSelections();
                console.log("Respostas:", selections);
                window.location.href = "home.html";
            }
        }

        function prevQuestion() {
            if (currentQuestion > 0) {
                currentQuestion--;
                loadQuestion();
            }
        }

        function saveSelections() {
            const selected = Array.from(document.querySelectorAll(".option-btn.selected")).map(btn => btn.textContent);
            selections[currentQuestion] = selected;
        }

        // inicia
        loadQuestion();
    </script>
</body>

</html>