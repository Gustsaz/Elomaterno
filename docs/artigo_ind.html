<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Artigo • Direitos das mães no trabalho</title>
    <link rel="stylesheet" href="../css/header.css">
    <link rel="stylesheet" href="./artigo_ind.css">
    <link rel="stylesheet" href="../css/globals.css">
    <link rel="icon" type="image/svg+xml" href="../img/iconelogo.svg">
    <link rel="alternate icon" type="image/png" href="../img/iconelogo.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

</head>

<body>

    <header class="top-header">
        <div class="left-section">
            <div class="logo-area">
                <a href="home.html" class="botao-link">
                    <img src="./img/logo_icon.png" alt="Ícone Empresa" class="icon">
                </a>
                <span class="company-name">elomaterno</span>
            </div>

            <div class="search-box">
                <input type="text" id="global-search" placeholder="Pesquisar...">
                <button class="btn-search"><i class="fa fa-search"></i></button>
                <button class="btn-filter"><i class="fa fa-sliders"></i></button>

                <div id="filter-menu" class="filter-menu hidden">
                    <label><input type="checkbox" value="todos" checked> Todos</label>
                    <label><input type="checkbox" value="posts"> Posts</label>
                    <label><input type="checkbox" value="artigos"> Artigos</label>
                    <label><input type="checkbox" value="eventos"> Eventos</label>
                    <label><input type="checkbox" value="perfis"> Perfis</label>
                </div>

                <div id="search-results" class="search-results hidden"></div>
            </div>

        </div>

        <div class="user-avatar">
            <a href="perfil.html">
                <div class="avatar-loader-container">
                    <img id="perfil-avatar">
                    <div class="loader">
                        <div class="dot"></div>
                        <div class="dot"></div>
                        <div class="dot"></div>
                    </div>
                </div>
            </a>
        </div>

    </header>

    <button id="menuToggle" class="menu-toggle">☰</button>

    <div class="botoes">
        <div class="menu-user">
            <a href="perfil.html">
                <div class="avatar-loader-container">
                    <img id="menu-avatar" src="./img/avatar_usuario.png" alt="Avatar do usuário">
                    <div class="loader">
                        <div class="dot"></div>
                        <div class="dot"></div>
                        <div class="dot"></div>
                    </div>
                </div>
            </a>
            <h3 id="menu-nome">
                <div class="loader">
                    <div class="dot"></div>
                    <div class="dot"></div>
                    <div class="dot"></div>
                </div>
            </h3>
            <span id="menu-email">
                <div class="loader">
                    <div class="dot"></div>
                    <div class="dot"></div>
                    <div class="dot"></div>
                </div>
            </span>
        </div>

        <a href="consultoria.html" class="botao-link">
            <div class="botao-item">
                <i class="fa fa-comments"></i>
                <span>Consultorias</span>
            </div>
        </a>

        <a href="forum.html" class="botao-link">
            <div class="botao-item">
                <i class="fa fa-users"></i>
                <span>Fórum</span>
            </div>
        </a>

        <a href="home.html" class="botao-link home-btn">
            <div class="botao-item ativo">
                <i class="fa fa-home"></i>
                <span>Home</span>
            </div>
        </a>

        <a href="artigos.html" class="botao-link">
            <div class="botao-item">
                <i class="fa fa-book"></i>
                <span>Artigos</span>
            </div>
        </a>

        <a href="calendario.html" class="botao-link">
            <div class="botao-item">
                <i class="fa fa-calendar"></i>
                <span>Calendário</span>
            </div>
        </a>

        <a href="eventos.html" class="botao-link">
            <div class="botao-item">
                <i class="fa fa-bell"></i>
                <span>Eventos</span>
            </div>
        </a>
    </div>

    <main class="artigo-wrapper">
        <div class="breadcrumb"><a href="artigos.html">← Voltar para artigos</a></div>
        <article class="artigo-card com-brilho" id="artigoCard">
            <div class="loader">
                <div class="dot"></div>
                <div class="dot"></div>
                <div class="dot"></div>
            </div>
        </article>
    </main>

    <script type="module">
        import { db } from "./firebase.js";
        import { doc, getDoc } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-firestore.js";

        // Pegando o ID do artigo da URL
        const id = new URLSearchParams(window.location.search).get("id");
        const card = document.getElementById("artigoCard");

        // Função para carregar o artigo com base no ID
        async function carregarArtigo() {
            if (!id) {
                card.innerHTML = "<p>ID do artigo não encontrado.</p>";
                return;
            }

            const ref = doc(db, "artigos", id);
            const snap = await getDoc(ref);
            if (!snap.exists()) {
                card.innerHTML = "<p>Artigo não encontrado.</p>";
                return;
            }

            const art = snap.data();

            // Preencher o conteúdo do artigo
            card.innerHTML = `
                <h1>${art.titulo}</h1>
                <p class="resumo">${art.resumo}</p>
                <a class="btn-externo" href="${art.link}" target="_blank">Confira o artigo completo aqui</a>
                <img src="${art.capa}" alt="Imagem artigo" class="artigo-img">
                <p class="conteudo">${art.conteudo}</p> <!-- Supondo que 'conteudo' seja a propriedade com o texto completo -->
            `;
        }

        // Carregar o artigo assim que a página for carregada
        carregarArtigo();
    </script>

    <script src="./artigo_ind.js"></script>
    <script type="module" src="./js/globals.js"></script>
</body>

</html>